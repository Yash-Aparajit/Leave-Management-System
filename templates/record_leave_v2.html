{% extends 'base.html' %}
{% block title %}Record leave{% endblock %}

{% block content %}
<a class="btn btn-outline-secondary back-btn" href="{{ url_for('index') }}"><i class="bi bi-arrow-left"></i> Back</a>

<div class="card p-4 mt-3">
  <h4 class="mb-3">Record leave</h4>

  <form method="post" class="row g-3">
    <div class="col-md-4">
      <label class="form-label">Employee ID</label>
      <input name="employee_code" id="employee_code" class="form-control" placeholder="EMP-001" required>
      <div id="emp_hint" class="form-text text-muted">Enter Employee ID then fill the leave details.</div>
    </div>

    <div class="col-md-4">
      <label class="form-label">Situation</label>
      <select name="situation" class="form-select">
        <option value="">(optional) Select situation</option>
        <option value="Planned">Planned</option>
        <option value="Unplanned">Unplanned</option>
        <option value="Sick">Sick</option>
      </select>
    </div>

    <div class="col-md-4">
      <label class="form-label">Leave type</label>
      <select name="leave_type_id" class="form-select" required>
        <option value="">Select leave type</option>
        {% for lt in leave_types %}
          <option value="{{ lt.id }}">{{ lt.name }} {% if not lt.is_paid %}(Unpaid){% endif %}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-2">
      <label class="form-label">Days</label>
      <input name="days" type="number" step="0.5" class="form-control" required value="1">
    </div>

    <div class="col-md-3">
      <label class="form-label">Date from</label>
      <input name="date_from" type="date" class="form-control" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Date to</label>
      <input name="date_to" type="date" class="form-control" required>
    </div>

    <div class="col-md-6">
      <label class="form-label">Approver (who approved this leave)</label>
      <input name="approver" class="form-control" placeholder="e.g. Plant Head">
    </div>

    <!-- New: name of person who recorded this leave into the system -->
    <div class="mb-3">
      <label class="form-label">Recorded by (entered by)</label>
      <input name="recorder_name" class="form-control" placeholder="Name of the person who recorded the leave (e.g. HR - {Your Name Here})">
      <div class="small text-muted">Optional: free text. This will appear in reports and exports.</div>
    </div>

    <div class="col-12">
      <label class="form-label">Reason / Notes</label>
      <textarea name="reason" class="form-control" rows="3" placeholder="Optional reason or short note"></textarea>
    </div>

    <div class="col-12">
      <button class="btn btn-primary">Save leave</button>
      <a class="btn btn-outline-secondary ms-2" href="{{ url_for('employees_list') }}">All employees</a>
    </div>
  </form>

  <hr/>
  <div class="small text-muted">
    Tip: If the employee was recently marked as left but should still receive credit, ask an Admin (master/developer) to reactivate or perform an override.
  </div>
</div>

{% endblock %}
