{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="row align-items-center mb-3">
  <div class="col-md-8">
    <h3 class="mb-0">Dashboard</h3>
    <div class="small text-muted">Quick actions for HR — local machine</div>
  </div>
  <div class="col-md-4 text-md-end mt-3 mt-md-0">
    <a class="btn btn-secondary me-2" href="{{ url_for('help_page') }}">
      <i class="bi bi-question-circle"></i> Help
    </a>
    <a class="btn btn-info" href="{{ url_for('employees_list') }}">
      <i class="bi bi-people"></i> Employees
    </a>
  </div>
</div>

<!-- METRICS -->
<div class="row g-3 mb-4">
  <div class="col-sm-6 col-md-3">
    <div class="metric-card">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <div class="text-muted small">Active Employees</div>
          <div class="h5 mb-0">{{ total_employees or 0 }}</div>
        </div>
        <i class="bi bi-people-fill fs-3 text-muted"></i>
      </div>
    </div>
  </div>

  <div class="col-sm-6 col-md-3">
    <div class="metric-card">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <div class="text-muted small">Leaves this week</div>
          <div class="h5 mb-0">{{ week_count or 0 }}</div>
        </div>
        <i class="bi bi-calendar-week fs-3 text-muted"></i>
      </div>
    </div>
  </div>

  <div class="col-sm-6 col-md-3">
    <div class="metric-card">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <div class="text-muted small">This month</div>
          <div class="h5 mb-0">{{ month_count or 0 }}</div>
        </div>
        <i class="bi bi-calendar fs-3 text-muted"></i>
      </div>
    </div>
  </div>

  <div class="col-sm-6 col-md-3">
    <div class="metric-card">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <div class="text-muted small">This year</div>
          <div class="h5 mb-0">{{ year_count or 0 }}</div>
        </div>
        <i class="bi bi-calendar2-event fs-3 text-muted"></i>
      </div>
    </div>
  </div>
</div>

<!-- BUTTON STYLE FIX -->
<style>
.big-btn {
  width: 100%;
  height: 76px;
  display: flex;
  align-items: center;
  gap: .8rem;
  font-size: 1.05rem;
  border-radius: 12px;
  margin-bottom: 14px;
  transition: transform .18s ease, box-shadow .18s ease;
}

.big-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.12);
}
</style>

<div class="row mb-4">

  <!-- COLUMN 1 — EMPLOYEE MASTER -->
  <div class="col-md-4 col-sm-12">
    <a class="btn btn-primary big-btn" href="{{ url_for('add_employee') }}">
      <i class="bi bi-person-plus fs-5"></i> Add Employee
    </a>

    <a class="btn btn-success big-btn" href="{{ url_for('promote_employee') }}">
      <i class="bi bi-arrow-up-right-circle fs-5"></i> Promote / Update
    </a>

    <a class="btn btn-warning big-btn" href="{{ url_for('remove_employee') }}">
      <i class="bi bi-person-x fs-5"></i> Remove / Mark Left
    </a>
  </div>

  <!-- COLUMN 2 — LEAVES -->
  <div class="col-md-4 col-sm-12">
    <a class="btn btn-info big-btn" href="{{ url_for('record_leave') }}">
      <i class="bi bi-journal-plus fs-5"></i> Record Leave
    </a>

    <a class="btn btn-primary big-btn" href="{{ url_for('check_balance') }}">
      <i class="bi bi-calculator fs-5"></i> Check Balance
    </a>

    <a class="btn btn-secondary big-btn" href="{{ url_for('history_home') }}">
      <i class="bi bi-archive fs-5"></i> Records / History
    </a>

    {% if session.role == 'developer' %}
      <a class="btn btn-danger big-btn"
        href="{{ url_for('dev_user_passwords') }}">
        <i class="bi bi-shield-lock"></i> User Password Control
      </a>
    {% endif %}
  </div>

  <!-- COLUMN 3 — RECORD ONLY -->
  <div class="col-md-4 col-sm-12">
    <a class="btn btn-primary big-btn" href="{{ url_for('comp_off_new') }}">
      <i class="bi bi-plus-square fs-5"></i> Record Comp-Off
    </a>

    <a class="btn btn-primary big-btn" href="{{ url_for('early_late_record') }}">
      <i class="bi bi-clock fs-5"></i> Record Early / Late
    </a>  

    <a class="btn btn-info big-btn" href="{{ url_for('outdoor_new') }}">
      <i class="bi bi-geo-alt fs-5"></i> Record Outdoor Duty
    </a>

    {% if session.role == 'developer' %}
    <a class="btn btn-danger big-btn" href="{{ url_for('internal_ledger') }}">
      <i class="bi bi-shield-lock"></i> Internal Ledger
    </a>
    {% endif %}
  </div>
</div>
{% endblock %}
